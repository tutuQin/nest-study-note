**â€œä¸ç”¨ Nest CLI è„šæ‰‹æ¶ï¼Œä»é›¶æ‰‹åŠ¨æ­å»ºå¹¶å¯åŠ¨ NestJS é¡¹ç›®â€ çš„è¯¦ç»†æ­¥éª¤æ–‡æ¡£**ã€‚

---

## ğŸš€ æ‰‹åŠ¨æ­å»ºå¹¶å¯åŠ¨ NestJS é¡¹ç›®ï¼ˆä¸ä½¿ç”¨ CLIï¼‰

### ğŸ“ ç›®å½•ç»“æ„é¢„è§ˆ

```bash
your-project/
â”œâ”€â”€ node_modules/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.module.ts     # åº”ç”¨çš„æ ¹æ¨¡å—
â”‚   â”œâ”€â”€ app.controller.ts   # æ§åˆ¶å™¨æ–‡ä»¶
â”‚   â””â”€â”€ main.ts            # åº”ç”¨å¯åŠ¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

---
## ğŸ“ åˆå§‹åŒ–æ–‡ä»¶å¤¹
åˆ›å»ºä¸€ä¸ªåä¸º `your-project` çš„æ–‡ä»¶å¤¹ï¼Œå¹¶è¿›å…¥è¯¥æ–‡ä»¶å¤¹ã€‚  
```bash
npm init -y
```

## 1ï¸âƒ£ å®‰è£…å¿…è¦ä¾èµ–

```bash
npm i --save @nestjs/core @nestjs/common rxjs reflect-metadata @nestjs/platform-express
npm install -g ts-node
```

### ğŸ“¦ å„ä¾èµ–è¯´æ˜ï¼š

| åŒ…å                         | ä½œç”¨è¯´æ˜                           |
| -------------------------- | ------------------------------ |
| `@nestjs/core`             | NestJS æ ¸å¿ƒæ¨¡å—ï¼Œç”¨äºåˆ›å»ºå’Œå¯åŠ¨åº”ç”¨          |
| `@nestjs/common`           | å¸¸ç”¨æ„é€ ç±»ï¼ˆæœåŠ¡ã€ä¸­é—´ä»¶ã€å®ˆå«ã€ç®¡é“ç­‰ï¼‰           |
| `rxjs`                     | ç”¨äºå¼‚æ­¥å’Œå“åº”å¼ç¼–ç¨‹                     |
| `reflect-metadata`         | æä¾›è£…é¥°å™¨å…ƒæ•°æ®åŠŸèƒ½ï¼Œæ˜¯ TypeScript è£…é¥°å™¨çš„åŸºç¡€ |
| `@nestjs/platform-express` | ä½¿ NestJS åº”ç”¨è¿è¡Œåœ¨ Express å¹³å°ä¸Š     |
| `ts-node`ï¼ˆå…¨å±€å®‰è£…ï¼‰            | å…è®¸ç›´æ¥è¿è¡Œ `.ts` æ–‡ä»¶                |

---

## 2ï¸âƒ£ ç¼–å†™æ ¸å¿ƒå¯åŠ¨æ–‡ä»¶ `main.ts`

**è·¯å¾„ï¼š** `src/main.ts`

```ts
// ä» NestJS æ ¸å¿ƒæ¨¡å—ä¸­å¯¼å…¥ NestFactoryï¼Œç”¨äºåˆ›å»º Nest åº”ç”¨å®ä¾‹
import { NestFactory } from '@nestjs/core'
// å¯¼å…¥åº”ç”¨çš„æ ¹æ¨¡å—
import { AppModule } from './app.module'

// å®šä¹‰å¼‚æ­¥å¯åŠ¨å‡½æ•° bootstrap
async function bootstrap() {
  // åˆ›å»º Nest åº”ç”¨å®ä¾‹ï¼Œå¹¶ä¼ å…¥æ ¹æ¨¡å— AppModule
  const app = await NestFactory.create(AppModule)

  // å¯åŠ¨åº”ç”¨å¹¶ç›‘å¬ 3000 ç«¯å£
  await app.listen(3000)
}

// è°ƒç”¨ bootstrap å‡½æ•°ï¼Œå¯åŠ¨åº”ç”¨
bootstrap()
```

---

## 3ï¸âƒ£ åˆ›å»ºåº”ç”¨æ ¹æ¨¡å— `app.module.ts`

**è·¯å¾„ï¼š** `src/app.module.ts`

```ts
// src/app.module.ts
import { Module } from '@nestjs/common';
import { AppController } from './app.controller';

@Module({
  controllers: [AppController], // æ³¨å†Œæ§åˆ¶å™¨
  providers: [],
})
export class AppModule {}
```

---
## 4 åˆ›å»ºåº”ç”¨æ ¹æ¨¡å— `app.controller.ts`
```ts
// src/app.controller.ts
import { Controller, Get, Post, Body } from '@nestjs/common';

@Controller() // å¯æŒ‡å®šè·¯ç”±å‰ç¼€å¦‚ @Controller('api')
export class AppController {
  
  @Get() // å¯¹åº” GET /
  getHello(): string {
    return 'Hello from NestJS!';
  }

  @Get('greet') // å¯¹åº” GET /greet
  getGreeting(): { message: string } {
    return { message: 'Welcome!' };
  }

  @Post('echo') // å¯¹åº” POST /echo
  echoMessage(@Body() body: any): any {
    return { received: body };
  }
}
```
å¯åŠ¨é¡¹ç›®åå¯ä»¥æµ‹è¯•ï¼š

GET http://localhost:3000/ â†’ è¿”å› "Hello from NestJS!"
GET http://localhost:3000/greet â†’ è¿”å› { "message": "Welcome!" }
POST http://localhost:3000/echo å¸¦è¯·æ±‚ä½“ â†’ è¿”å›æ¥æ”¶åˆ°çš„æ•°æ®
å…³é”®ç‚¹è¯´æ˜ï¼š
@Controller() è£…é¥°å™¨æ ‡è®°è¿™æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ç±»
æ–¹æ³•è£…é¥°å™¨ï¼ˆ@Get(), @Post() ç­‰ï¼‰å®šä¹‰è·¯ç”±å’ŒHTTPæ–¹æ³•
å‚æ•°è£…é¥°å™¨ï¼ˆå¦‚ @Body()ï¼‰ç”¨äºè·å–è¯·æ±‚å‚æ•°
éœ€è¦åœ¨æ¨¡å—çš„ controllers æ•°ç»„ä¸­æ³¨å†Œæ‰èƒ½ç”Ÿæ•ˆ
## 5 æ·»åŠ  TypeScript é…ç½® `tsconfig.json`

**è·¯å¾„ï¼š** `tsconfig.json`

```json
{
  "compilerOptions": {
    "module": "commonjs",
    "target": "es2017",
    "strict": true,
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true,
    "moduleResolution": "node",
    "esModuleInterop": true,
    "skipLibCheck": true,
    "outDir": "./dist"
  },
  "include": ["src/**/*"]
}
```
ä¸‹é¢æ˜¯ä½ æä¾›çš„ `tsconfig.json` æ–‡ä»¶ä¸­æ¯ä¸ªé…ç½®é¡¹çš„è¯¦ç»†è§£é‡Šï¼Œé€æ¡è¯´æ˜å…¶ä½œç”¨ï¼š

---

## ğŸ”§ `"compilerOptions"`ï¼šç¼–è¯‘å™¨é€‰é¡¹

### 1. `"module": "commonjs"`

* **ä½œç”¨**ï¼šæŒ‡å®šæ¨¡å—ç³»ç»Ÿã€‚
* **è¯´æ˜**ï¼šä½¿ç”¨ Node.js å¸¸ç”¨çš„ `CommonJS` æ¨¡å—ç³»ç»Ÿï¼Œå¦‚ï¼š`require()` å’Œ `module.exports`ã€‚
* **é€‚ç”¨åœºæ™¯**ï¼šè¿è¡Œåœ¨ Node.js ç¯å¢ƒçš„åç«¯é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ `commonjs`ã€‚

---

### 2. `"target": "es2017"`

* **ä½œç”¨**ï¼šè®¾ç½® TypeScript ç¼–è¯‘å JavaScript çš„ç›®æ ‡ç‰ˆæœ¬ã€‚
* **è¯´æ˜**ï¼šä½¿ç”¨ ES2017 çš„è¯­æ³•ç‰¹æ€§è¿›è¡Œè¾“å‡ºï¼Œæ¯”å¦‚ `async/await`ã€‚
* **é€‰æ‹©å‚è€ƒ**ï¼šå¸¸ç”¨è¿˜æœ‰ `es5`, `es6`, `es2020` ç­‰ï¼Œè¶Šæ–°æµè§ˆå™¨æ”¯æŒè¶Šæœ‰é™ï¼ŒNode æ”¯æŒè¶Šå¥½ã€‚

---

### 3. `"strict": true`

* **ä½œç”¨**ï¼šå¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹ã€‚
* **è¯´æ˜**ï¼šå¼€å¯ååŒ…æ‹¬ä»¥ä¸‹ä¸¥æ ¼é€‰é¡¹ï¼š

  * `strictNullChecks`
  * `noImplicitAny`
  * `strictFunctionTypes`
  * `strictPropertyInitialization`
  * ç­‰ç­‰
* **æ¨è**ï¼š**âœ… å¼ºçƒˆæ¨èå¼€å¯**ï¼Œå¸®åŠ©ä½ é¿å…è®¸å¤šç±»å‹é”™è¯¯ã€‚

---

### 4. `"experimentalDecorators": true`

* **ä½œç”¨**ï¼šå…è®¸ä½¿ç”¨å®éªŒæ€§çš„è£…é¥°å™¨è¯­æ³•ï¼ˆ`@Controller()`ã€`@Injectable()` ç­‰ï¼‰ã€‚
* **è¯´æ˜**ï¼šè¿™æ˜¯ NestJS å’Œ Angular ä¸­ä½¿ç”¨è£…é¥°å™¨çš„å‰æã€‚

---

### 5. `"emitDecoratorMetadata": true`

* **ä½œç”¨**ï¼šç¼–è¯‘å™¨åœ¨ç”Ÿæˆ JavaScript ä»£ç æ—¶ä¼šæ³¨å…¥å…ƒæ•°æ®ï¼ˆç”¨äºåå°„ï¼‰ã€‚
* **è¯´æ˜**ï¼šé…åˆ `reflect-metadata` ä½¿ç”¨ï¼ŒNestJS çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿéœ€è¦è¿™ä¸ªå…ƒæ•°æ®æ¥çŸ¥é“æ¯ä¸ªå‚æ•°çš„ç±»å‹ã€‚

---

### 6. `"moduleResolution": "node"`

* **ä½œç”¨**ï¼šå‘Šè¯‰ TypeScript å¦‚ä½•å®šä½æ¨¡å—ï¼ˆ`import ... from 'x'` æ—¶ï¼‰ã€‚
* **è¯´æ˜**ï¼šæŒ‰ç…§ Node.js çš„æ–¹å¼æŸ¥æ‰¾æ¨¡å—ï¼ˆä»å½“å‰ç›®å½•é€çº§å‘ä¸ŠæŸ¥æ‰¾ `node_modules`ï¼‰ã€‚
* **æ¨èå€¼**ï¼šNode é¡¹ç›®ä¸­ä½¿ç”¨ `node` æ˜¯æœ€æ ‡å‡†çš„åšæ³•ã€‚

---

### 7. `"esModuleInterop": true`

* **ä½œç”¨**ï¼šå…è®¸é»˜è®¤å¯¼å…¥ CommonJS æ¨¡å—ã€‚
* **è¯´æ˜**ï¼š

  * ä½¿å¾—ä½ å¯ä»¥å†™ï¼š`import express from 'express'`ï¼Œè€Œä¸æ˜¯ `import * as express from 'express'`
  * å…¼å®¹æ€§æ›´å¥½ï¼Œæ¨èå¼€å¯ã€‚
* **æ³¨æ„**ï¼šåŒæ—¶ä¼šå¯ç”¨ `"allowSyntheticDefaultImports"`ã€‚

---

### 8. `"skipLibCheck": true`

* **ä½œç”¨**ï¼šè·³è¿‡å¯¹ä¾èµ–åº“ä¸­ `.d.ts` æ–‡ä»¶çš„ç±»å‹æ£€æŸ¥ã€‚
* **è¯´æ˜**ï¼šåŠ å¿«ç¼–è¯‘é€Ÿåº¦ï¼Œé¿å…å› ä¸ºç¬¬ä¸‰æ–¹åº“çš„ç±»å‹æŠ¥é”™è€Œå½±å“å¼€å‘ã€‚
* **æ¨è**ï¼šå¼€å¯ âœ…ï¼Œå°¤å…¶æ˜¯å¤§å‹é¡¹ç›®ä¸­èƒ½æå‡æ€§èƒ½ã€‚

---

### 9. `"outDir": "./dist"`

* **ä½œç”¨**ï¼šæŒ‡å®šç¼–è¯‘åçš„ JavaScript è¾“å‡ºç›®å½•ã€‚
* **è¯´æ˜**ï¼šæ‰€æœ‰ `.ts` æ–‡ä»¶ä¼šè¢«ç¼–è¯‘åˆ° `dist/` ç›®å½•ä¸­ã€‚

---

## ğŸ“‚ `"include"`ï¼šè¦åŒ…å«çš„æ–‡ä»¶èŒƒå›´

### `"include": ["src/**/*"]`

* **ä½œç”¨**ï¼šå‘Šè¯‰ TypeScript ç¼–è¯‘å™¨è¦åŒ…å«å“ªäº›æ–‡ä»¶å‚ä¸ç¼–è¯‘ã€‚
* **è¯´æ˜**ï¼š

  * `"src/**/*"` è¡¨ç¤ºåŒ…å« `src` ç›®å½•ä¸‹çš„æ‰€æœ‰ `.ts` æ–‡ä»¶ï¼ˆåŒ…æ‹¬å­æ–‡ä»¶å¤¹ï¼‰ã€‚

---

## âœ… æ€»ç»“ï¼ˆç®€æ˜ä¸­æ–‡å¯¹ç…§ï¼‰

| é…ç½®é¡¹                        | å«ä¹‰è¯´æ˜                      |
| -------------------------- | ------------------------- |
| `module: "commonjs"`       | ä½¿ç”¨ Node å¸¸ç”¨æ¨¡å—ç³»ç»Ÿ            |
| `target: "es2017"`         | è¾“å‡ºæ”¯æŒ async/await çš„ ES2017 |
| `strict: true`             | å¼€å¯æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥                |
| `experimentalDecorators`   | å…è®¸ä½¿ç”¨è£…é¥°å™¨è¯­æ³•                 |
| `emitDecoratorMetadata`    | ç”Ÿæˆè¿è¡Œæ—¶ç±»å‹å…ƒæ•°æ®                |
| `moduleResolution: "node"` | æŒ‰ç…§ Node æ¨¡å—æŸ¥æ‰¾æ–¹å¼è§£æä¾èµ–        |
| `esModuleInterop: true`    | å…è®¸ç”¨ ES6 æ–¹å¼å¼•å…¥ CommonJS æ¨¡å—  |
| `skipLibCheck: true`       | è·³è¿‡ä¾èµ–åº“ç±»å‹æ£€æŸ¥ï¼Œæå‡æ€§èƒ½            |
| `outDir: "./dist"`         | ç¼–è¯‘ç»“æœè¾“å‡ºåˆ° `dist/` ç›®å½•        |
| `include: ["src/**/*"]`    | åªç¼–è¯‘ `src` ç›®å½•ä¸‹çš„æ–‡ä»¶          |

---

---

## 5ï¸âƒ£ åœ¨ `package.json` ä¸­æ·»åŠ è¿è¡Œè„šæœ¬

```json
"scripts": {
  "start": "ts-node src/main.ts"
}
```

---

## âœ… è¿è¡Œé¡¹ç›®

```bash
npm run start
```

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`ï¼Œå¦‚æœä½ æ·»åŠ äº†æ§åˆ¶å™¨ï¼Œå³å¯çœ‹åˆ°å“åº”å†…å®¹ã€‚

---